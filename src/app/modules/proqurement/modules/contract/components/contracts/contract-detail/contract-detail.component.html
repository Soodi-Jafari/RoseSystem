<app-loading *ngIf="isLoading"></app-loading>
 <div class="modal-header" style="padding : 2px">
  <h5 class="modal-title" id="modal-basic-title">Contract</h5>
  <button type="button" class="close" aria-label="Close" (click)="closeDialog()">
    <span aria-hidden="true">&times;</span>
  </button>
</div>

  <div class="modal-body" style="font-size:12px">
    <div class="row" style="padding-top: 5px">
      <div class="col-md-2"> 
         <label class="label"><span style="color:red">*</span> MRP No</label>
      </div>
      <div class="col-md-4" >  
        <div *ngIf="!isEditMode">
        <kendo-combobox
          #mrpList
          style="width:100%"
          [data]="mrps"
          [(ngModel)] ="viewModel.mrp"
          [filterable]="true"
          textField="mrpNo"
          valueField="id"
          (valueChange)="mrpSelectionChange($event)"></kendo-combobox>  
      
        </div> 
        <div *ngIf="isEditMode">
          <input disabled type="text" [(ngModel)] ="viewModel.mrpNo" class="rose-form-control">
        </div>        
      </div>
      <div class="col-md-2">
          <label class="label"><span style="color:red">*</span> MRP Vendor</label>
      </div>
      <div class="col-md-4" >             
        
        <div *ngIf="!isEditMode">
        <kendo-combobox
          #vendorList
          style="width:100%"
          [data]="vendors"
          [(ngModel)] ="viewModel.mrpVendor"
          [filterable]="true"
          textField="title"
          valueField="id"></kendo-combobox>  
      
        </div> 
        <div *ngIf="isEditMode">
          <input disabled type="text" [(ngModel)] ="viewModel.mrpVendorTitle" class="rose-form-control">
        </div>        
    </div>  
    </div>
 
    <div class="row" style="padding-top: 5px">
        <div class="col-md-2">
            <label class="label"><span style="color:red">*</span> PO NO</label>
        </div>
        <div class="col-md-4"> 
            <input type="text" [(ngModel)] ="viewModel.poNo" class="rose-form-control">
        </div>
        <div class="col-md-2">
            <label class="label"><span style="color:red">*</span> PO Date</label>
        </div>
        <div class="col-md-4">
           <mat-form-field>
             <input matInput [matDatepicker]="poDatePicker"  [(ngModel)] ="viewModel.poDate" >
              <mat-datepicker-toggle matSuffix [for]="poDatePicker"></mat-datepicker-toggle>
              <mat-datepicker #poDatePicker></mat-datepicker>
           </mat-form-field>
        </div>       
  </div>
  <div class="row" style="padding-top: 5px">
      <div class="col-md-2">
          <label class="label"> Equipment</label>
      </div>
      <div class="col-md-10"> 
          <input type="text" [(ngModel)] ="viewModel.subject" class="rose-form-control">
      </div>      
</div>
 <div class="row"  style="padding-top: 10px">
      <div class="col-md-2">
          <label class="label"> Effectiveness Date</label>
      </div>
      <div class="col-md-4"> 
           <mat-form-field>
              <input matInput [matDatepicker]="effectivenessDatePicker"  [(ngModel)] ="viewModel.effectivenessDate" >
               <mat-datepicker-toggle matSuffix [for]="effectivenessDatePicker"></mat-datepicker-toggle>
               <mat-datepicker #effectivenessDatePicker></mat-datepicker>
            </mat-form-field>
      </div>
      <div class="col-md-2">
          <label class="label"> Cancelation Date</label>
      </div>
      <div class="col-md-4">
         <mat-form-field>
           <input matInput [matDatepicker]="cancelationDatePicker"  [(ngModel)] ="viewModel.cancelationDate" >
            <mat-datepicker-toggle matSuffix [for]="cancelationDatePicker"></mat-datepicker-toggle>
            <mat-datepicker #cancelationDatePicker></mat-datepicker>
         </mat-form-field>
      </div>       
</div>
<div class="row"  style="padding-top: 5px">
    <div class="col-md-2">
        <label class="label"> Duration</label>
    </div>
    <div class="col-md-4"> 
        <input type="text" [(ngModel)] ="viewModel.duration" class="rose-form-control">
    </div>
    <div class="col-md-2">
        <label class="label"> Duration Unit</label>
    </div>
    <div class="col-md-4">
        <select [(ngModel)] ="viewModel.durationUnit" class="rose-form-control"> 
            <option value="1">  Day </option>
            <option value="2">  Month </option>
            <option value="3">  Year </option>
        </select>         
    </div>       
</div>
<div class="row"  style="padding-top: 5px">
    <div class="col-md-2">
        <label class="label"> Price (Rial)</label>
    </div>
    <div class="col-md-4"> 
        <input type="number" [(ngModel)] ="viewModel.basePrice" class="rose-form-control">
    </div>
    <div class="col-md-2">
        <label class="label"> Price (Curr.)</label>
    </div>
    <div class="col-md-4">
        <input type="number" [(ngModel)] ="viewModel.currencyPrice" class="rose-form-control">     
    </div>       
</div>
<div class="row"  style="padding-top: 5px">
    <div class="col-md-2">
        <label class="label"> Currency Unit</label>
    </div>
    <div class="col-md-4"> 
        <kendo-combobox
             #unitList
             style="width:100%"
             [data]="units"
             [(ngModel)] ="viewModel.currencyUnit"
             [filterable]="true"
             textField="title"
             valueField="id"></kendo-combobox>   
    </div>
    <div class="col-md-2">
        <label class="label"> Exchange Rate</label>
    </div>
    <div class="col-md-4">
        <input type="number" [(ngModel)] ="viewModel.exchangeRate" class="rose-form-control">     
    </div>       
</div>
<div class="row"  style="padding-top: 5px">
    <div class="col-md-2">
        <label class="label"> Items Price (Rial)</label>
    </div>
    <div class="col-md-4"> 
        <input type="text"  [(ngModel)] ="viewModel.itemsBasePrice" class="rose-form-control">
    </div>
    <div class="col-md-2">
        <label class="label">Items Price (Curr.)</label>
    </div>
    <div class="col-md-4">
        <input type="text" [(ngModel)] ="viewModel.itemCurrencyPrice" class="rose-form-control">     
    </div>       
</div>
<div class="row"  style="padding-top: 5px">
    <div class="col-md-2">
        <label class="label"> Terms Of Effectivness</label>
    </div>
    <div class="col-md-4"> 
        <select [(ngModel)] ="viewModel.termsOfEffectivness" class="rose-form-control"> 
            <option value="1">  Advanded Payment </option>
        </select>         
    </div>
    <div class="col-md-2">
        <label class="label"> Terms Of Delivery</label>
    </div>
    <div class="col-md-4">
        <input type="text" [(ngModel)] ="viewModel.termsOfDelivery" class="rose-form-control">     
    </div>       
</div>
<div class="row"  style="padding-top: 10px">
    <div class="col-md-2">
        <label class="label"> Installation Date</label>
    </div>
    <div class="col-md-4"> 
         <mat-form-field>
            <input matInput [matDatepicker]="installationDatePicker"  [(ngModel)] ="viewModel.installationDate" >
             <mat-datepicker-toggle matSuffix [for]="installationDatePicker"></mat-datepicker-toggle>
             <mat-datepicker #installationDatePicker></mat-datepicker>
          </mat-form-field>
    </div>
    <div class="col-md-2">
        <label class="label"> Delivery Date</label>
    </div>
    <div class="col-md-4">
       <mat-form-field>
         <input matInput [matDatepicker]="deliveryDatePicker"  [(ngModel)] ="viewModel.deliveryDate" >
          <mat-datepicker-toggle matSuffix [for]="deliveryDatePicker"></mat-datepicker-toggle>
          <mat-datepicker #deliveryDatePicker></mat-datepicker>
       </mat-form-field>
    </div>       
</div>


<div class="modal-footer" style="padding-bottom: 2px;">
    <button *ngxPermissionsOnly="['saveContract']" class="btn btn-success" (click)="save()">Save</button>
    <button mat-stroked-button (click)="closeDialog()">Cancel</button>
</div>

